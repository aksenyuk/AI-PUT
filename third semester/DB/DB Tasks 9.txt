/* Lab 9 */

/* Task 1 */

CREATE TABLE projects(project_id integer GENERATED ALWAYS AS IDENTITY, project_name character varying(200), description character varying(1000), start_date date DEFAULT CURRENT_DATE, end_date date, budget numeric(10, 2));

/* Task 2 */

INSERT INTO projects(project_name, description, start_date, end_date, budget) VALUES('New Technologies Survey', 'A project aimed at reviewing the area of advanced database technologies.', DATE '2018-01-01', NULL, 1500000);
INSERT INTO projects(project_name, description, start_date, end_date, budget) VALUES('Advanced Data Analysis', 'Analyzing data obtained from various organizations.', DATE '2017-09-20', DATE '2018-10-01', 2750000);

/* Task 3 */

INSERT INTO projects(project_id, project_name, description, start_date, end_date, budget) VALUES(55, 'Creating backbone network', 'Expanding the organizations network infrastructure.', DATE '2019-07-01', DATE '2020-05-31', 5000000);

/* It was NOT successful, since we try to define project_id in here, that is, by default, GENERATED ALWAYS AS IDENTITY but not GENERATED BY DEFAULT AS IDENTITY (i.e., user cannot change its default value, in our case). */

/* Task 4 */

INSERT INTO projects(project_name, description, start_date, end_date, budget) VALUES('Creating backbone network', 'Expanding the organizations network infrastructure.', DATE '2019-07-01', DATE '2020-05-31', 5000000);

SELECT project_id, project_name FROM projects ORDER BY project_id;

/* Task 5 */

UPDATE projects SET project_id = 100 WHERE project_name = 'Creating backbone network';

/* It was not successful for the same reasons as it is described in Task 3. */

/* Task 6 */

CREATE TABLE project_copy AS SELECT * FROM projects;

SELECT * FROM project_copy ORDER BY project_id;

/* Task 7 */

INSERT INTO project_copy(project_id, project_name, description, start_date, end_date, budget) VALUES(100, 'Creating mobile network', 'Expanding the organizations network infrastructure â€“ part 2.', DATE '2020-06-01', DATE '2021-05-31', 4000000);

/* Task 8 */

DELETE FROM project_copy WHERE project_name = 'Creating backbone network';

SELECT * FROM project_copy ORDER BY project_id;
SELECT * FROM projects ORDER BY project_id;

/* Task 9 */

ALTER TABLE projects ADD number_of_emp numeric(3) MODIFY description character varying(1500);

/* Task 10 */

SELECT LENGTH(project_name) FROM projects WHERE LENGTH(project_name) >= ALL (SELECT LENGTH(project_name) FROM projects);

ALTER TABLE projects MODIFY project_name character varying(15);

/* It was not successful, since at least one project_name from table projects is longer than this. */

/* Task 11 */

ALTER TABLE projects RENAME COLUMN budget TO project_budget;

SELECT * FROM projects ORDER BY project_id;

/* Task 12 */

DROP TABLE project_copy;


